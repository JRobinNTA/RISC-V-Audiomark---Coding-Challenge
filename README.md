### This repo was created as a solution to the RISC-V Audiomark Mentorship coding challenge

The Coding Challenge question is attached in the repo under the name 
"Coding Challenge - RISC-V Audiomark.md"

The full file along with the given benchmark harness is included in the src/ directory

A disassembled file with the full code section generated by the compiler is included in the root of the project directory as

"final.asm"

To verify the results update the gem5 path in the given Makefile and build the file then do a

```bash
make run
```
Expected sample output

```bash
Cycles ref: 59689
Verify RVV: OK (max diff = 0)
Cycles RVV: 3108
```
The gem5 emulator used a default VLEN of 256 bits width and ELEN of 64 bits

The generated m5out by the gem5 emulator is included in the repository

#### The Solution

```C
void q15_axpy_rvv(const int16_t *a, const int16_t *b,
                  int16_t *y, int n, int16_t alpha)
{
    size_t vl;
    for (; n > 0; n -= vl) {
        // Set vl based on input size 16-bit and input LMUL as m4
        vl = __riscv_vsetvl_e16m4(n); 

        // Load inputs LMUL m4
        vint16m4_t va = __riscv_vle16_v_i16m4(a, vl);
        vint16m4_t vb = __riscv_vle16_v_i16m4(b, vl);

        // Widen Multiply Input m4 to Output m8
        vint32m8_t v_acc = __riscv_vwmul_vx_i32m8(vb, alpha, vl);

        // Widen Add Input m4 + Acc m8 and store to Acc m8
        v_acc = __riscv_vwadd_wv_i32m8(v_acc, va, vl);

        // Narrow and Saturate Acc m8 to Output m4
        vint16m4_t vy = __riscv_vnclip_wx_i16m4(v_acc, 0, vl);

        // Store LMUL m4
        __riscv_vse16_v_i16m4(y, vy, vl);

        a += vl; b += vl; y += vl;
    }
}
```

```C
    size_t vl;
    vl = __riscv_vsetvl_e16m4(n);
```
    First set the vl length to determine the number of elements to be processed at once in a loop

```C
    vint16m4_t va = __riscv_vle16_v_i16m4(a, vl);
    vint16m4_t vb = __riscv_vle16_v_i16m4(b, vl);
```
    Then load up the elements into the respective vectors based on the vl value

```C
    vint32m8_t v_acc = __riscv_vwmul_vx_i32m8(vb, alpha, vl);
```
    Multiply and widen 
